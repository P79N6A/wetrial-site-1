webpackJsonp([66],{859:function(n,s){n.exports={content:["article",["p","Mock \u6570\u636e\u662f\u524d\u7aef\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u5fc5\u4e0d\u53ef\u5c11\u7684\u4e00\u73af\uff0c\u662f\u5206\u79bb\u524d\u540e\u7aef\u5f00\u53d1\u7684\u5173\u952e\u94fe\u8def\u3002\u901a\u8fc7\u9884\u5148\u8ddf\u670d\u52a1\u5668\u7aef\u7ea6\u5b9a\u597d\u7684\u63a5\u53e3\uff0c\u6a21\u62df\u8bf7\u6c42\u6570\u636e\u751a\u81f3\u903b\u8f91\uff0c\u80fd\u591f\u8ba9\u524d\u7aef\u5f00\u53d1\u72ec\u7acb\u81ea\u4e3b\uff0c\u4e0d\u4f1a\u88ab\u670d\u52a1\u7aef\u7684\u5f00\u53d1\u6240\u963b\u585e\u3002"],["p","\u5728 Ant Design Pro \u4e2d\uff0c\u56e0\u4e3a\u6211\u4eec\u7684\u5e95\u5c42\u6846\u67b6\u662f umi\uff0c\u800c\u5b83\u81ea\u5e26\u4e86\u4ee3\u7406\u8bf7\u6c42\u529f\u80fd\uff0c\u901a\u8fc7\u4ee3\u7406\u8bf7\u6c42\u5c31\u80fd\u591f\u8f7b\u677e\u5904\u7406\u6570\u636e\u6a21\u62df\u7684\u529f\u80fd\u3002"],["h2","\u4f7f\u7528 umi \u7684 mock \u529f\u80fd"],["p","umi \u91cc\u7ea6\u5b9a mock \u6587\u4ef6\u5939\u4e0b\u7684\u6587\u4ef6\u5373 mock \u6587\u4ef6\uff0c\u6587\u4ef6\u5bfc\u51fa\u63a5\u53e3\u5b9a\u4e49\uff0c\u652f\u6301\u57fa\u4e8e ",["code","require"]," \u52a8\u6001\u5206\u6790\u7684\u5b9e\u65f6\u5237\u65b0\uff0c\u652f\u6301 ES6 \u8bed\u6cd5\uff0c\u4ee5\u53ca\u53cb\u597d\u7684\u51fa\u9519\u63d0\u793a\uff0c\u8be6\u60c5\u53c2\u770b ",["a",{title:null,href:"https://umijs.org/guide/mock-data.html"},"umijs.org"],"\u3002"],["pre",{lang:"js",highlighted:'<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>\n  <span class="token comment" spellcheck="true">// \u652f\u6301\u503c\u4e3a Object \u548c Array</span>\n  <span class="token string">\'GET /api/users\'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> users<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n\n  <span class="token comment" spellcheck="true">// GET POST \u53ef\u7701\u7565</span>\n  <span class="token string">\'/api/users/1\'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n\n  <span class="token comment" spellcheck="true">// \u652f\u6301\u81ea\u5b9a\u4e49\u51fd\u6570\uff0cAPI \u53c2\u8003 express@4</span>\n  <span class="token string">\'POST /api/users/create\'</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">\'OK\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>'},["code","export default {\n  // \u652f\u6301\u503c\u4e3a Object \u548c Array\n  'GET /api/users': { users: [1, 2] },\n\n  // GET POST \u53ef\u7701\u7565\n  '/api/users/1': { id: 1 },\n\n  // \u652f\u6301\u81ea\u5b9a\u4e49\u51fd\u6570\uff0cAPI \u53c2\u8003 express@4\n  'POST /api/users/create': (req, res) => { res.end('OK'); },\n};"]],["p","\u5f53\u5ba2\u6237\u7aef\uff08\u6d4f\u89c8\u5668\uff09\u53d1\u9001\u8bf7\u6c42\uff0c\u5982\uff1a",["code","GET /api/users"],"\uff0c\u90a3\u4e48\u672c\u5730\u542f\u52a8\u7684 ",["code","umi dev"]," \u4f1a\u8ddf\u6b64\u914d\u7f6e\u6587\u4ef6\u5339\u914d\u8bf7\u6c42\u8def\u5f84\u4ee5\u53ca\u65b9\u6cd5\uff0c\u5982\u679c\u5339\u914d\u5230\u4e86\uff0c\u5c31\u4f1a\u5c06\u8bf7\u6c42\u901a\u8fc7\u914d\u7f6e\u5904\u7406\uff0c\u5c31\u53ef\u4ee5\u50cf\u6837\u4f8b\u4e00\u6837\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5\u8fd4\u56de\u6570\u636e\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u51fd\u6570\u5904\u7406\u4ee5\u53ca\u91cd\u5b9a\u5411\u5230\u53e6\u4e00\u4e2a\u670d\u52a1\u5668\u3002"],["p","\u6bd4\u5982\u5b9a\u4e49\u5982\u4e0b\u6620\u5c04\u89c4\u5219\uff1a"],["pre",{lang:null,highlighted:'<span class="token string">\'GET /api/currentUser\'</span><span class="token punctuation">:</span> {\n  name<span class="token punctuation">:</span> <span class="token string">\'momo.zxy\'</span><span class="token punctuation">,</span>\n  avatar<span class="token punctuation">:</span> imgMap<span class="token punctuation">.</span>user<span class="token punctuation">,</span>\n  userid<span class="token punctuation">:</span> <span class="token string">\'00000001\'</span><span class="token punctuation">,</span>\n  notifyCount<span class="token punctuation">:</span> <span class="token number">12</span><span class="token punctuation">,</span>\n}<span class="token punctuation">,</span>'},["code","'GET /api/currentUser': {\n  name: 'momo.zxy',\n  avatar: imgMap.user,\n  userid: '00000001',\n  notifyCount: 12,\n},"]],["p","\u8bbf\u95ee\u7684\u672c\u5730 ",["code","/api/currentUser"]," \u63a5\u53e3\uff1a"],["p","\u8bf7\u6c42\u5934"],["p",["img",{src:"https://gw.alipayobjects.com/zos/rmsportal/ZdlcFoYonSGDupWnktZn.png",width:"400"}]],["p","\u8fd4\u56de\u7684\u6570\u636e"],["p",["img",{src:"https://gw.alipayobjects.com/zos/rmsportal/OLHIXePGHkkFoaZVQAts.png",width:"600"}]],["h3","\u5f15\u5165 Mock.js"],["p",["a",{title:null,href:"http://mockjs.com/"},"Mock.js"]," \u662f\u5e38\u7528\u7684\u8f85\u52a9\u751f\u6210\u6a21\u62df\u6570\u636e\u7684\u7b2c\u4e09\u65b9\u5e93\uff0c\u5f53\u7136\u4f60\u53ef\u4ee5\u7528\u4f60\u559c\u6b22\u7684\u4efb\u610f\u5e93\u6765\u7ed3\u5408 umi \u6784\u5efa\u6570\u636e\u6a21\u62df\u529f\u80fd\u3002"],["pre",{lang:"js",highlighted:'<span class="token keyword">import</span> mockjs <span class="token keyword">from</span> <span class="token string">\'mockjs\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>\n  <span class="token comment" spellcheck="true">// \u4f7f\u7528 mockjs \u7b49\u4e09\u65b9\u5e93</span>\n  <span class="token string">\'GET /api/tags\'</span><span class="token punctuation">:</span> mockjs<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    <span class="token string">\'list|100\'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">\'@city\'</span><span class="token punctuation">,</span> <span class="token string">\'value|1-100\'</span><span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token string">\'type|0-2\'</span><span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>'},["code","import mockjs from 'mockjs';\n\nexport default {\n  // \u4f7f\u7528 mockjs \u7b49\u4e09\u65b9\u5e93\n  'GET /api/tags': mockjs.mock({\n    'list|100': [{ name: '@city', 'value|1-100': 50, 'type|0-2': 1 }],\n  }),\n};"]],["h3","\u6dfb\u52a0\u8de8\u57df\u8bf7\u6c42\u5934"],["p","\u8bbe\u7f6e ",["code","response"]," \u7684\u8bf7\u6c42\u5934\u5373\u53ef\uff1a"],["pre",{lang:null,highlighted:'<span class="token string">\'POST /api/users/create\'</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {\n  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>\n  res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">\'Access-Control-Allow-Origin\'</span><span class="token punctuation">,</span> <span class="token string">\'*\'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>\n  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>\n}<span class="token punctuation">,</span>'},["code","'POST /api/users/create': (req, res) => {\n  ...\n  res.setHeader('Access-Control-Allow-Origin', '*');\n  ...\n},"]],["h2","\u5408\u7406\u7684\u62c6\u5206\u4f60\u7684 mock \u6587\u4ef6"],["p","\u5bf9\u4e8e\u6574\u4e2a\u7cfb\u7edf\u6765\u8bf4\uff0c\u8bf7\u6c42\u63a5\u53e3\u662f\u590d\u6742\u5e76\u4e14\u7e41\u591a\u7684\uff0c\u4e3a\u4e86\u5904\u7406\u5927\u91cf\u6a21\u62df\u8bf7\u6c42\u7684\u573a\u666f\uff0c\u6211\u4eec\u901a\u5e38\u628a\u6bcf\u4e00\u4e2a\u6570\u636e\u6a21\u578b\u62bd\u8c61\u6210\u4e00\u4e2a\u6587\u4ef6\uff0c\u7edf\u4e00\u653e\u5728 ",["code","mock"]," \u7684\u6587\u4ef6\u5939\u4e2d\uff0c\u7136\u540e\u4ed6\u4eec\u4f1a\u81ea\u52a8\u88ab\u5f15\u5165\u3002"],["p",["img",{src:"https://gw.alipayobjects.com/zos/rmsportal/wbeiDacBkchXrTafasBy.png",width:"200"}]],["h2","\u5982\u4f55\u6a21\u62df\u5ef6\u8fdf"],["p","\u4e3a\u4e86\u66f4\u52a0\u771f\u5b9e\u5730\u6a21\u62df\u7f51\u7edc\u6570\u636e\u8bf7\u6c42\uff0c\u5f80\u5f80\u9700\u8981\u6a21\u62df\u7f51\u7edc\u5ef6\u8fdf\u65f6\u95f4\u3002"],["h3","\u624b\u52a8\u6dfb\u52a0 setTimeout \u6a21\u62df\u5ef6\u8fdf"],["p","\u4f60\u53ef\u4ee5\u91cd\u5199\u8bf7\u6c42\u7684\u4ee3\u7406\u65b9\u6cd5\uff0c\u5728\u5176\u4e2d\u6dfb\u52a0\u6a21\u62df\u5ef6\u8fdf\u7684\u5904\u7406\uff0c\u5982\uff1a"],["pre",{lang:"js",highlighted:'<span class="token string">\'POST /api/forms\'</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">\'Ok\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">,</span>'},["code","'POST /api/forms': (req, res) => {\n  setTimeout(() => {\n    res.send('Ok');\n  }, 1000);\n},"]],["h3","\u4f7f\u7528\u63d2\u4ef6\u6a21\u62df\u5ef6\u8fdf"],["p","\u4e0a\u9762\u7684\u65b9\u6cd5\u867d\u7136\u7b80\u4fbf\uff0c\u4f46\u662f\u5f53\u4f60\u9700\u8981\u6dfb\u52a0\u6240\u6709\u7684\u8bf7\u6c42\u5ef6\u8fdf\u7684\u65f6\u5019\uff0c\u53ef\u80fd\u5c31\u9ebb\u70e6\u4e86\uff0c\u4e0d\u8fc7\u53ef\u4ee5\u901a\u8fc7\u7b2c\u4e09\u65b9\u63d2\u4ef6\u6765\u7b80\u5316\u8fd9\u4e2a\u95ee\u9898\uff0c\u5982\uff1a",["a",{title:null,href:"https://github.com/nikogu/roadhog-api-doc/blob/master/lib/utils.js#L5"},"roadhog-api-doc#delay"],"\u3002"],["pre",{lang:"js",highlighted:'<span class="token keyword">import</span> <span class="token punctuation">{</span> delay <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'roadhog-api-doc\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token string">\'GET /api/project/notice\'</span><span class="token punctuation">:</span> getNotice<span class="token punctuation">,</span>\n  <span class="token string">\'GET /api/activities\'</span><span class="token punctuation">:</span> getActivities<span class="token punctuation">,</span>\n  <span class="token string">\'GET /api/rule\'</span><span class="token punctuation">:</span> getRule<span class="token punctuation">,</span>\n  <span class="token string">\'GET /api/tags\'</span><span class="token punctuation">:</span> mockjs<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    <span class="token string">\'list|100\'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">\'@city\'</span><span class="token punctuation">,</span> <span class="token string">\'value|1-100\'</span><span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token string">\'type|0-2\'</span><span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token string">\'GET /api/fake_list\'</span><span class="token punctuation">:</span> getFakeList<span class="token punctuation">,</span>\n  <span class="token string">\'GET /api/fake_chart_data\'</span><span class="token punctuation">:</span> getFakeChartData<span class="token punctuation">,</span>\n  <span class="token string">\'GET /api/profile/basic\'</span><span class="token punctuation">:</span> getProfileBasicData<span class="token punctuation">,</span>\n  <span class="token string">\'GET /api/profile/advanced\'</span><span class="token punctuation">:</span> getProfileAdvancedData<span class="token punctuation">,</span>\n  <span class="token string">\'POST /api/register\'</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> status<span class="token punctuation">:</span> <span class="token string">\'ok\'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token string">\'GET /api/notices\'</span><span class="token punctuation">:</span> getNotices<span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token comment" spellcheck="true">// \u8c03\u7528 delay \u51fd\u6570\uff0c\u7edf\u4e00\u5904\u7406</span>\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">delay</span><span class="token punctuation">(</span>proxy<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>'},["code","import { delay } from 'roadhog-api-doc';\n\nconst proxy = {\n  'GET /api/project/notice': getNotice,\n  'GET /api/activities': getActivities,\n  'GET /api/rule': getRule,\n  'GET /api/tags': mockjs.mock({\n    'list|100': [{ name: '@city', 'value|1-100': 50, 'type|0-2': 1 }]\n  }),\n  'GET /api/fake_list': getFakeList,\n  'GET /api/fake_chart_data': getFakeChartData,\n  'GET /api/profile/basic': getProfileBasicData,\n  'GET /api/profile/advanced': getProfileAdvancedData,\n  'POST /api/register': (req, res) => {\n    res.send({ status: 'ok' });\n  },\n  'GET /api/notices': getNotices,\n};\n\n// \u8c03\u7528 delay \u51fd\u6570\uff0c\u7edf\u4e00\u5904\u7406\nexport default delay(proxy, 1000);"]],["h3","\u8054\u8c03"],["p","\u5f53\u672c\u5730\u5f00\u53d1\u5b8c\u6bd5\u4e4b\u540e\uff0c\u5982\u679c\u670d\u52a1\u5668\u7684\u63a5\u53e3\u6ee1\u8db3\u4e4b\u524d\u7684\u7ea6\u5b9a\uff0c\u90a3\u4e48\u53ea\u9700\u8981\u5173\u95ed mock \u6570\u636e\u6216\u8005\u4ee3\u7406\u5230\u670d\u52a1\u7aef\u7684\u771f\u5b9e\u63a5\u53e3\u5730\u5740\u5373\u53ef\u3002"],["pre",{lang:"bash",highlighted:'$ <span class="token function">npm</span> run start:no-mock'},["code","$ npm run start:no-mock"]]],meta:{order:13,title:"Mock \u548c\u8054\u8c03",type:"\u8fdb\u9636",filename:"docs/mock-api.zh-CN.md"},toc:["ul",["li",["a",{className:"bisheng-toc-h2",href:"#\u4f7f\u7528-umi-\u7684-mock-\u529f\u80fd",title:"\u4f7f\u7528 umi \u7684 mock \u529f\u80fd"},"\u4f7f\u7528 umi \u7684 mock \u529f\u80fd"]],["li",["a",{className:"bisheng-toc-h2",href:"#\u5408\u7406\u7684\u62c6\u5206\u4f60\u7684-mock-\u6587\u4ef6",title:"\u5408\u7406\u7684\u62c6\u5206\u4f60\u7684 mock \u6587\u4ef6"},"\u5408\u7406\u7684\u62c6\u5206\u4f60\u7684 mock \u6587\u4ef6"]],["li",["a",{className:"bisheng-toc-h2",href:"#\u5982\u4f55\u6a21\u62df\u5ef6\u8fdf",title:"\u5982\u4f55\u6a21\u62df\u5ef6\u8fdf"},"\u5982\u4f55\u6a21\u62df\u5ef6\u8fdf"]]]}}});